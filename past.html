<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
  </head>

    <style>

    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');

    *{
    background-color: #1DCC8D;
    }

   label.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;

    height: 75px;
    padding: 1rem;
    color: #4c4c4c;
    font-size: 20px;
    font-weight: 550;
    letter-spacing: 0.01em;
    display: flex;
    justify-content: center;
    align-items: center;
    }

    label.title {
    display: flex;
    justify-content: center;
    font-size: 40px;
    padding-top: 30px;
    padding-bottom: 10px;
    font-family: 'Noto Sans KR', sans-serif;
    letter-spacing: 0.3em;
    color: #262626;
    line-height: 40px;
    }

    label.subtitle {
      display: flex;
      justify-content: center;
      font-size: 30px;
      font-weight: bold;
      padding-top: 10px;
      padding-bottom: 20px;
      font-family: 'Noto Sans KR', sans-serif;
      letter-spacing: 0.2em;
      color: #262626;
      line-height: 40px;
    }
    
   /* 서울 평균기온 상승 그래프 */
      body {
        padding: 0;
        height: 500px;
      }
      
      text {
        font-family: 'Noto Sans KR', sans-serif;
        font-size: 10px;
      }
      
        
      path.line {
        fill: none;
        stroke: #343434;
        stroke-width: 3px;
      } 
      
      .axis path,
      .axis line {
        fill: none;
        shape-rendering: crispEdges;
      }

    /* 온실가스 관령 성분 데이터 */
      .axis path,
      .axis line {
      fill: none;
      stroke: #12A570;
      shape-rendering: crispEdges;
      }

      .axis path {
      display: none;
      }

      .line {
      fill: none;
      stroke-width: 1px;
      opacity: 1;
      }

      .eng-content4{  
      margin-left: 310px;
      margin-right: 300px;
      padding-bottom: 10px;
      font-size: 13px;
      font-family: 'Nanum Gothic', sans-serif;
      color: #262626;
      letter-spacing: 0.01em;
      line-height: 21px;
}
    </style>

<body>
  <header>
    <label class="header">meun&nbsp;⎯⎯⎯&nbsp;bar</label>
  </header> 

  <!-- 서울시 평균기온 상승 그래프-->
  <script type="text/javascript">
    
  var parseDate = d3.time.format("%m/%d/%Y").parse;

  var margin = {left: 50, right: 20, top: 20, bottom: 50 };

  var width = 600 - margin.left - margin.right;
  var height = 500 - margin.top - margin.bottom;


  var max = 0;

  //그래프 왼쪽 여백 
  var xNudge = 300;
  var yNudge = 20;

  var minDate = new Date();
  var maxDate = new Date();


  d3.csv("pasttemperature.csv")
      .row(function(d) { return { year: parseDate(d.year), temperature: Number(d.temperature.trim().slice(1))}; })
      .get(function(error, rows) { 
        max = d3.max(rows, function(d) { return d.temperature; });
        minDate = d3.min(rows, function(d) {return d.year; });
      maxDate = d3.max(rows, function(d) { return d.year; });		


      var y = d3.scale.linear()
            .domain([0,6])
            .range([height,0]);
      
      var x = d3.time.scale()
            .domain([minDate,maxDate])
            .range([0,width]);
      
      var yAxis = d3.svg.axis()
              .orient("left")
              .scale(y);
              
      var xAxis = d3.svg.axis()
              .orient("bottom")
              .scale(x);
      
      var line = d3.svg.line()
        .x(function(d){ return x(d.year); })
        .y(function(d){ return y(d.temperature); })
        .interpolate("cardinal");
      
      
      var svg = d3.select("body").append("svg").attr("id","svg").attr("height","100%").attr("width","100%");
      var chartGroup = svg.append("g").attr("class","chartGroup").attr("transform","translate("+xNudge+","+yNudge+")");
      
      chartGroup.append("path")
        .attr("class","line")
        .attr("d",function(d){ return line(rows); })		
      

      chartGroup.append("g")
        .attr("class","axis x")
        .attr("transform","translate(0,"+height+")")
        .call(xAxis);
        
      chartGroup.append("g")
        .attr("class","axis y")
        .call(yAxis);
    

      
    });
      

      
      
      
  </script>

  <nav>
  <label class="title">과거기후 변화 전국평균 그래프</label>
  <label class="subtitle">_테스트</label>
  <div class ="eng-content4">&nbsp;&nbsp;한글 테스트 we look at the words written on the node at a glance, We don't know in what context and for what reason this word was used. To help with this difficulty, when clicking on a node, a modal window will appear with a few lines of text. This selects the sentence in which the word appears first and shows the sentences before and after.
    Of course, people may not know enough information about words simply by checking that part, but at least we think it will be a help to know " The Ethics of Information ". 
    </div>
  </nav>

  <!-- 온실가스 성분 데이터 -->
  <script>

  var margin = {top: 60, right: 10, bottom: 60, left: 250},
      width = 1000 - margin.left - margin.right,
      height = 460 - margin.top - margin.bottom;

  var x = d3.scale.linear()
      .range([0, width])
    .domain([1999,2018]);

  var y = d3.scale.linear()
      .range([height, 0])
    .domain([0,650]);

  var color = d3.scale.ordinal()
    .range(["#F3ED70", "#F3ED70", "#F3ED70","#F3ED70"])
    .domain(["CO2","CFC11","CFC12","CH4"]);

  var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom")
    .tickFormat(d3.format("d"));

  var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left")
    .ticks(10)
    .tickSize(-width, 0, 0);

  var line = d3.svg.line()
      .interpolate("cardinal")
      .x(function(d) { return x(d.year); })
      .y(function(d) { return y(d.animal); });

  var svg = d3.select("body").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  d3.csv("pastaircondition.csv", function(error, data) {
    if (error) throw error;


    var keys = d3.keys(data[0]).filter(function(key) { return key !== "year"; });
    
    var animalLines = keys.map(function(name) {
      return {
        name: name,
        values: data.map(function(d) {
              return {
            year: d.year,
            animal: d[name]};
        })
      };
    });

    //Append axes
    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis);

    
      //Append the lines
      var lines = svg.selectAll(".lines")
          .data(animalLines)
        .enter().append("g")
          .attr("class", "lines");

    //Very thick barely visible line
    lines.append("path")
      .attr("class", "line")
      .attr("d", function(d) { return line(d.values); })
      .style("stroke", function(d) { return color(d.name); })
      .style("stroke-width", 14)
      .style("opacity", 0.05);
      
    //Thick rather difficult to see line
    lines.append("path")
          .attr("class", "line")
          .attr("d", function(d) { return line(d.values); })
          .style("stroke", function(d) { return color(d.name); })
      .style("stroke-width", 8)
      .style("opacity", 0.1);
        
    //Actual full opacity thin line		
    lines.append("path")
            .attr("class", "line")
            .attr("d", function(d) { return line(d.values); })
            .style("stroke", function(d) { return color(d.name); })
        .style("stroke-width", 1.5);

    //Label
      lines.append("text")
            .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
            .attr("transform", function(d) { 
          return "translate(" + x(d.value.year) + "," + y(d.value.animal) + ")"; 
        })
            .attr("x", 3)
            .attr("dy", ".35em")
            .text(function(d) { return d.name; });
      
  });
  </script>

<div class ="eng-content4">&nbsp;&nbsp;When we look at the words written on the node at a glance, We don't know in what context and for what reason this word was used. To help with this difficulty, when clicking on a node, a modal window will appear with a few lines of text. This selects the sentence in which the word appears first and shows the sentences before and after.
  Of course, people may not know enough information about words simply by checking that part, but at least we think it will be a help to know " The Ethics of Information ". 
  </div>

 </body>
</html>